
## ⚠️ تحذير أمني هام

هذا المشروع يتعامل مع مفاتيح وصول (API Keys) ورموز (Tokens) حساسة. هذه البيانات سرية للغاية ويجب عدم مشاركتها أبداً أو رفعها إلى مستودعات عامة مثل GitHub.

- **ملف `.env`:** يتم تخزين جميع البيانات السرية في ملف `backend/.env`. هذا الملف مستبعد من نظام Git عن طريق `.gitignore`، لذا لن يتم رفعه عن طريق الخطأ.
- **التجديد الدوري:** من الممارسات الجيدة تجديد مفاتيح الوصول الخاصة بك بشكل دوري.

---

## 1. الإعداد للمرة الأولى

هذه الخطوات مخصصة لمسؤول النظام ويجب تنفيذها مرة واحدة فقط عند إعداد المشروع لأول مرة على جهاز جديد.

1.  **تثبيت المتطلبات:** تأكد من أن لديك Node.js مثبت على جهازك.

2.  **تشغيل ملف الإعداد:**
    -   اذهب إلى المجلد الرئيسي للمشروع.
    -   اضغط مرتين على ملف `setup.bat`.
    -   سيقوم السكربت بتثبيت الاعتماديات اللازمة.

3.  **إدخال الإعدادات:**
    -   سيطلب منك السكربت إدخال معلومات الإعداد الهامة:
        -   توكن بوت التيليجرام (`TELEGRAM_BOT_TOKEN`)
        -   معرّف قناة التيليجرام (`TELEGRAM_CHAT_ID`)
        -   رابط مشروع Supabase (`SUPABASE_URL`)
        -   مفتاح Supabase العام (`SUPABASE_KEY`)
        -   مفتاح Supabase للخدمة (`SUPABASE_SERVICE_KEY`) - (مهم للمهام المجدولة)
    -   سيتم حفظ هذه المعلومات تلقائياً في ملف `backend/.env`.

## 2. إعادة الإعداد (إذا لزم الأمر)

إذا كنت بحاجة إلى تغيير الإعدادات (مثل تغيير توكن البوت أو مفاتيح Supabase)، اتبع الخطوات التالية:

1.  **تشغيل `reset-config.bat`:** هذا الملف سيقوم بحذف ملف الإعدادات القديم بأمان.
2.  **تشغيل `setup.bat`:** بعد حذف الإعدادات القديمة، قم بتشغيل ملف الإعداد الرئيسي مرة أخرى واتبع نفس خطوات "الإعداد للمرة الأولى" لإدخال البيانات الجديدة.

---

## 3. التشغيل اليومي

بعد اكتمال الإعداد، يمكن لأي مستخدم تشغيل النظام يومياً باستخدام هذه الطريقة.

1.  اذهب إلى المجلد الرئيسي للمشروع.
2.  اضغط مرتين على ملف `start-server.bat`.
3.  سيتم فتح الموقع تلقائياً في متصفحك، وستظل نافذة الخادم السوداء تعمل في الخلفية.
4.  **مهم:** يجب أن تظل نافذة الخادم مفتوحة طوال فترة استخدامك للموقع.

## استكشاف الأخطاء وإصلاحها

**مشكلة: ملف `start-server.bat` أو `setup.bat` يغلق فوراً.**

- **السبب:** غالباً ما يكون برنامج الحماية (Antivirus) على جهازك هو السبب.
- **الحل 1 (سريع):** اضغط بزر الماوس الأيمن على الملف واختر "تشغيل كمسؤول" (Run as administrator).
- **الحل 2 (دائم):** أضف المجلد الكامل للمشروع إلى قائمة "الاستثناءات" (Exclusions) في برنامج الحماية الخاص بك.